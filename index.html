<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CII Entity Generator</title>

<style>
body{
    background:#0d0d0d;
    color:#e0e0e0;
    font-family:monospace;
    padding:20px;
}
h2{
    border-bottom:1px solid #444;
    padding-bottom:10px;
}
button{
    padding:10px 20px;
    background:#1a1a1a;
    color:#fff;
    border:1px solid #555;
    cursor:pointer;
    margin-top:10px;
}
button:hover{
    background:#222;
}
textarea{
    width:100%;
    height:500px;
    background:#000;
    color:#00ff88;
    margin-top:20px;
    padding:15px;
    white-space:pre;
}
select{
    padding:5px;
    margin-left:10px;
    background:#111;
    color:#fff;
    border:1px solid #555;
}
</style>
</head>

<body>

<h2>CII Random Entity Generator</h2>

<label>
ACCESS Level:
<select id="level">
<option value="1">Lv.1</option>
<option value="2">Lv.2</option>
<option value="3">Lv.3</option>
<option value="4">Lv.4</option>
<option value="5">Lv.5</option>
</select>
</label>

<br>
<button onclick="generateEntity()">Generate Entity</button>

<textarea id="output" readonly></textarea>

<script>

const classifications = {
    "空間干渉型": [
        "特定座標において空間層が多重化する現象が確認されている。",
        "内部進入時、出口の位置が再定義される。",
        "観測者ごとに内部構造が変動する可能性が示唆される。",
        "座標固定が困難であり、位置情報が不安定である。"
    ],
    "現象発生型": [
        "局地的時間誤差が断続的に発生する。",
        "音響波形が逆相で観測される。",
        "視認不能な衝撃現象が周期発生する。",
        "温度変化が物理法則に反する挙動を示す。"
    ],
    "物質変質型": [
        "接触物体の分子配列が再構築される。",
        "金属物質が有機化する現象が確認された。",
        "硬度および質量が不規則変動する。",
        "外見と内部構造が一致しない。"
    ],
    "生物異常型": [
        "急速再生能力を保持する。",
        "視線接触により神経負荷が発生する。",
        "外見が周囲の記憶依存で変化する。",
        "通常の生命活動指標を逸脱している。"
    ]
};

const statuses = ["Active", "Dormant", "Archived", "Sealed"];

function randomFrom(arr){
    return arr[Math.floor(Math.random() * arr.length)];
}

function pad(num){
    return num.toString().padStart(4,'0');
}

function getUniqueNumber(){
    let used = JSON.parse(localStorage.getItem("cii_used_numbers") || "[]");
    let num;
    do {
        num = Math.floor(Math.random() * 9999) + 1;
    } while(used.includes(num));
    used.push(num);
    localStorage.setItem("cii_used_numbers", JSON.stringify(used));
    return pad(num);
}

function buildSection(type){
    let text = "";
    while(text.length < 1700){
        text += randomFrom(classifications[type]) + "\n";
        text += "当該対象はCII監視規定下に置かれている。\n";
        text += "干渉には承認が必要とされる。\n";
        text += "観測班による定期更新が実施されている。\n\n";
    }
    return text;
}

function generateEntity(){

    const level = document.getElementById("level").value;
    const fileNum = getUniqueNumber();

    const types = Object.keys(classifications);
    const classification = randomFrom(types);
    const status = randomFrom(statuses);

    const entityType = (level >= 3) ? "II" : (Math.random() > 0.3 ? "II" : "UI");

    const overview = buildSection(classification);
    const record = buildSection(classification);
    const damage = buildSection(classification);
    const classify = buildSection(classification);
    const note = buildSection(classification);

    const output = 
`CII/CL/File-${fileNum}
Classification: Entity-${fileNum} (${entityType})
ACCESS: Lv.${level}
Status: ${status}
─────
■ 概要
─────
${overview}
─────
■ 観測記録
─────
${record}
─────
■ 被害状況
─────
${damage}
─────
■ 分類経緯
─────
${classify}
─────
■ 補足
─────
${note}
─────
■ CORE審議履歴（該当時）
─────
${level >= 4 ? "CORE審議実施済。" : "該当なし"}
────────────────`;

    document.getElementById("output").value = output;
}

</script>

</body>
</html>
